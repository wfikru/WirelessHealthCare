<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:composition template="/Presentation/sections/masterLayout.xhtml">
           
            <ui:define name="content">
                <h:form>
                    <p:fieldset >
                        <h:panelGrid  columns="3" width="650" border="0" >                         
                            <h:outputLabel value="First Name" />
                            <p:inputText value="#{registration.patient.firstName}"
                                         id="firstName"
                                         required="true" 
                                         requiredMessage="FirstName is required"
                                         validatorMessage="FirstName should be of length from 5 to 15 chars"
                                         >
                                <f:validateLength minimum="2" maximum="25" for="firstName"></f:validateLength>
                            </p:inputText>
                            <p:message for="firstName" />

                            <h:outputLabel value="Last Name" />
                            <p:inputText value="#{registration.patient.lastName}"
                                         id="lastName"></p:inputText>
                            <p:message for="lastName" />

                            <p:outputLabel for="birthdate" value="Date of Birth" />
                            <p:calendar id="birthdate" value="#{registration.patient.dob}"
                                        locale="de" 
                                        navigator="true" 
                                        yearRange="c-50:c-08"
                                        validatorMessage="Year should be in MM/dd/yyyy format"
                                        pattern="MM/dd/yyyy"  >
                                <f:convertDateTime pattern="MM/dd/yyyy" />
                            </p:calendar> 
                            <p:message for="birthdate" />

                            <h:outputLabel value="Gender" />
                            <h:selectOneRadio id="gender" 
                                              value="#{registration.patient.gender}" >
                                <f:selectItem itemValue="M" itemLabel="M" />
                                <f:selectItem itemValue="F" itemLabel="F" />
                            </h:selectOneRadio>
                            <p:message for="gender" />

                            <p:outputLabel value="Street" />
                            <p:inputText value="#{registration.address.street}"
                                         id="street"
                                         required="true" 
                                         requiredMessage="Street is required"
                                         >
                            </p:inputText>
                            <p:message for="street" />

                            <h:outputLabel value="Zip Code" />
                            <p:inputText value="#{registration.address.zip}"
                                         id="zipCode"
                                         required="true" 
                                         requiredMessage="Zip code is required"
                                         validatorMessage="Zip code should be of length from _ to _ chars"
                                         >
                                <f:validateLength minimum="2" maximum="15" for="zipCode"></f:validateLength>
                            </p:inputText>
                            <p:message for="zipCode" />

                            <h:outputLabel value="State" />
                            <p:inputText value="#{registration.address.state}"
                                         id="state"
                                         required="true" 
                                         requiredMessage="state is required"
                                         validatorMessage="State should be of length 2 letters "
                                         >
                                <f:validateLength minimum="2" maximum="2" for="state"></f:validateLength>
                            </p:inputText>
                            <p:message for="state" />


                            <h:outputLabel value="Email" />
                            <p:inputText value="#{registration.patient.email}"
                                         id="email"
                                         validatorMessage="Invalid Email">
                                <f:validateRegex pattern="[a-zA-Z0-9_.+-]+@[a-zA-Z]+.[a-zA-Z]{2,3}"></f:validateRegex>   
                            </p:inputText>
                            <p:message for="email" />
                            <h:panelGrid>
                            <h:outputLabel value="Password" />
                            <p:password id="password" required="true" label="password"
                                        requiredMessage="Please enter your password."
                                        match="confirmPassword" value="#{registration.patient.password}"
                                        maxlength="20">
                            </p:password>
                            <p:watermark for="password" value="Password *" />
                            <p:message for="password" />

                            <h:outputLabel value="Confirm Password" />
                            <p:password id="confirmPassword" required="true"
                                        requiredMessage="Please confirm your password."
                                        value="#{registration.patient.password}"
                                        maxlength="20">
                            </p:password>
                            <p:watermark for="confirmPassword" value="Type Password Again *" />
                            <p:message for="confirmPassword" />
                            </h:panelGrid>

                        </h:panelGrid>
                          <h:commandButton value="Register" action="#{registration.registerUser()}"/>
                    </p:fieldset>
                </h:form> 

            </ui:define>
        </ui:composition>

    </h:body>    

</html>

